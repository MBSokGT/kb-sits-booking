# ğŸ“Š Ğ¡Ñ…ĞµĞ¼Ğ° Ğ±Ğ°Ğ·Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… ĞšĞ‘ Ğ¡Ğ¸Ñ‚Ñ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Ğ¡Ğ¢Ğ Ğ£ĞšĞ¢Ğ£Ğ Ğ Ğ‘ĞĞ—Ğ« Ğ”ĞĞĞĞ«Ğ¥                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   departments    â”‚  ĞÑ‚Ğ´ĞµĞ»Ñ‹ ĞºĞ¾Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)          â”‚  UUID
â”‚ name             â”‚  TEXT (UNIQUE)
â”‚ created_at       â”‚  TIMESTAMPTZ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 1:N
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      users       â”‚  ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğ¸ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)          â”‚  UUID
â”‚ email            â”‚  TEXT (UNIQUE)
â”‚ password_hash    â”‚  TEXT
â”‚ full_name        â”‚  TEXT
â”‚ department_id    â”‚  UUID (FK â†’ departments)
â”‚ role             â”‚  TEXT (employee/manager/admin)
â”‚ created_at       â”‚  TIMESTAMPTZ
â”‚ updated_at       â”‚  TIMESTAMPTZ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 1:N (ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ĞµĞ»ÑŒ ÑÑ‚Ğ°Ğ¶Ğ°)
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      floors      â”‚  Ğ­Ñ‚Ğ°Ğ¶Ğ¸ Ğ¾Ñ„Ğ¸ÑĞ°
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)          â”‚  UUID
â”‚ name             â”‚  TEXT
â”‚ floor_number     â”‚  INTEGER
â”‚ image_url        â”‚  TEXT
â”‚ image_data       â”‚  TEXT (base64)
â”‚ created_at       â”‚  TIMESTAMPTZ
â”‚ updated_at       â”‚  TIMESTAMPTZ
â”‚ created_by       â”‚  UUID (FK â†’ users)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 1:N
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      zones       â”‚  Ğ—Ğ¾Ğ½Ñ‹ Ğ½Ğ° ÑÑ‚Ğ°Ğ¶Ğ°Ñ…
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)          â”‚  UUID
â”‚ floor_id         â”‚  UUID (FK â†’ floors)
â”‚ name             â”‚  TEXT
â”‚ color            â”‚  TEXT (#hex)
â”‚ seats_count      â”‚  INTEGER
â”‚ coordinates      â”‚  JSONB [{x,y}, ...]
â”‚ is_active        â”‚  BOOLEAN
â”‚ created_at       â”‚  TIMESTAMPTZ
â”‚ updated_at       â”‚  TIMESTAMPTZ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 1:N
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      seats       â”‚  ĞœĞµÑÑ‚Ğ° Ğ² Ğ·Ğ¾Ğ½Ğ°Ñ…
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)          â”‚  UUID
â”‚ zone_id          â”‚  UUID (FK â†’ zones)
â”‚ seat_number      â”‚  INTEGER
â”‚ is_available     â”‚  BOOLEAN
â”‚ created_at       â”‚  TIMESTAMPTZ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 1:N
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    bookings      â”‚  Ğ‘Ñ€Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ¼ĞµÑÑ‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)          â”‚  UUID
â”‚ seat_id          â”‚  UUID (FK â†’ seats)
â”‚ user_id          â”‚  UUID (FK â†’ users) - Ğ´Ğ»Ñ ĞºĞ¾Ğ³Ğ¾
â”‚ booked_by        â”‚  UUID (FK â†’ users) - ĞºÑ‚Ğ¾ Ğ·Ğ°Ğ±Ñ€Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ»
â”‚ booking_date     â”‚  DATE
â”‚ time_slot        â”‚  TEXT (morning/afternoon/evening/full_day/custom)
â”‚ start_time       â”‚  TIME (Ğ´Ğ»Ñ custom)
â”‚ end_time         â”‚  TIME (Ğ´Ğ»Ñ custom)
â”‚ status           â”‚  TEXT (active/expired/cancelled)
â”‚ created_at       â”‚  TIMESTAMPTZ
â”‚ updated_at       â”‚  TIMESTAMPTZ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           Ğ¡Ğ’Ğ¯Ğ—Ğ˜ Ğ¢ĞĞ‘Ğ›Ğ˜Ğ¦                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

departments (1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> (N) users
                                  â”‚
                                  â”‚ (ÑĞ¾Ğ·Ğ´Ğ°Ñ‚ĞµĞ»ÑŒ)
                                  â–¼
floors (1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> (N) zones
                                  â”‚
                                  â–¼
                               (N) seats
                                  â”‚
                                  â–¼
users (1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> (N) bookings
                                  â”‚
                                  â”‚ (Ğ´Ğ»Ñ ĞºĞ¾Ğ³Ğ¾)
                                  â–¼
                               seats (1)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Ğ˜ĞĞ”Ğ•ĞšĞ¡Ğ« (Ğ´Ğ»Ñ ÑĞºĞ¾Ñ€Ğ¾ÑÑ‚Ğ¸)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

users:
  - idx_users_email (email)
  - idx_users_department (department_id)

zones:
  - idx_zones_floor (floor_id)

seats:
  - idx_seats_zone (zone_id)

bookings:
  - idx_bookings_seat (seat_id)
  - idx_bookings_user (user_id)
  - idx_bookings_date (booking_date)
  - idx_bookings_status (status)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ĞŸĞ Ğ•Ğ”Ğ¡Ğ¢ĞĞ’Ğ›Ğ•ĞĞ˜Ğ¯ (VIEWS)                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

available_seats_view:
  - ĞŸĞ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ²ÑĞµ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹Ğµ Ğ¼ĞµÑÑ‚Ğ° Ñ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸ĞµĞ¹ Ğ¾ Ğ·Ğ¾Ğ½Ğµ Ğ¸ ÑÑ‚Ğ°Ğ¶Ğµ
  - Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ Ğ´Ğ»Ñ Ğ±Ñ‹ÑÑ‚Ñ€Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ¸ÑĞºĞ° ÑĞ²Ğ¾Ğ±Ğ¾Ğ´Ğ½Ñ‹Ñ… Ğ¼ĞµÑÑ‚

booking_statistics:
  - Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° Ğ±Ñ€Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğ¹ Ğ¿Ğ¾ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑĞ¼
  - ĞšĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ñ…, Ğ¸ÑÑ‚Ñ‘ĞºÑˆĞ¸Ñ… Ğ±Ñ€Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğ¹

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Ğ¤Ğ£ĞĞšĞ¦Ğ˜Ğ˜ Ğ˜ Ğ¢Ğ Ğ˜Ğ“Ğ“Ğ•Ğ Ğ«                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

update_updated_at_column():
  - ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑĞµÑ‚ Ğ¿Ğ¾Ğ»Ğµ updated_at Ğ¿Ñ€Ğ¸ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¸ Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸
  - ĞŸÑ€Ğ¸Ğ¼ĞµĞ½ÑĞµÑ‚ÑÑ Ğº: users, floors, zones, bookings

expire_old_bookings():
  - ĞŸĞ¾Ğ¼ĞµÑ‡Ğ°ĞµÑ‚ Ğ¸ÑÑ‚Ñ‘ĞºÑˆĞ¸Ğµ Ğ±Ñ€Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ ĞºĞ°Ğº expired
  - Ğ’Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ğ¿Ğ¾ Ñ€Ğ°ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ (cron)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ROW LEVEL SECURITY (RLS)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

departments:
  âœ“ Ğ’ÑĞµ Ğ¼Ğ¾Ğ³ÑƒÑ‚ Ñ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ
  âœ“ Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Ğ°Ğ´Ğ¼Ğ¸Ğ½Ñ‹ ÑĞ¾Ğ·Ğ´Ğ°ÑÑ‚

users:
  âœ“ Ğ’Ğ¸Ğ´ÑÑ‚ ÑĞµĞ±Ñ Ğ¸ ĞºĞ¾Ğ»Ğ»ĞµĞ³ Ğ¿Ğ¾ Ğ¾Ñ‚Ğ´ĞµĞ»Ñƒ
  âœ“ ĞĞ´Ğ¼Ğ¸Ğ½Ñ‹ Ğ²Ğ¸Ğ´ÑÑ‚ Ğ²ÑĞµÑ…

floors, zones, seats:
  âœ“ Ğ’ÑĞµ Ñ‡Ğ¸Ñ‚Ğ°ÑÑ‚
  âœ“ ĞĞ´Ğ¼Ğ¸Ğ½Ñ‹ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ÑÑÑ‚

bookings:
  âœ“ Ğ’ÑĞµ Ğ²Ğ¸Ğ´ÑÑ‚
  âœ“ Ğ¡Ğ¾Ñ‚Ñ€ÑƒĞ´Ğ½Ğ¸ĞºĞ¸ Ğ±Ñ€Ğ¾Ğ½Ğ¸Ñ€ÑƒÑÑ‚ ÑĞµĞ±Ğµ
  âœ“ Ğ ÑƒĞºĞ¾Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»Ğ¸ Ğ±Ñ€Ğ¾Ğ½Ğ¸Ñ€ÑƒÑÑ‚ Ğ´Ğ»Ñ Ğ¾Ñ‚Ğ´ĞµĞ»Ğ°
  âœ“ ĞĞ´Ğ¼Ğ¸Ğ½Ñ‹ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ÑÑÑ‚ Ğ²ÑĞµĞ¼

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ĞŸĞ Ğ˜ĞœĞ•Ğ Ğ« Ğ—ĞĞŸĞ ĞĞ¡ĞĞ’                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

-- ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ²ÑĞµ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹Ğµ Ğ¼ĞµÑÑ‚Ğ° Ğ½Ğ° Ğ´Ğ°Ñ‚Ñƒ
SELECT s.*, z.name as zone_name, f.name as floor_name
FROM seats s
JOIN zones z ON s.zone_id = z.id
JOIN floors f ON z.floor_id = f.id
WHERE s.is_available = true
  AND s.id NOT IN (
    SELECT seat_id FROM bookings
    WHERE booking_date = '2024-01-15'
      AND time_slot = 'full_day'
      AND status = 'active'
  );

-- Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° Ğ±Ñ€Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğ¹ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
SELECT 
  u.full_name,
  COUNT(*) as total_bookings,
  COUNT(CASE WHEN b.status = 'active' THEN 1 END) as active,
  COUNT(CASE WHEN b.status = 'expired' THEN 1 END) as expired
FROM users u
LEFT JOIN bookings b ON u.id = b.user_id
WHERE u.id = 'user-uuid'
GROUP BY u.id, u.full_name;

-- Ğ—Ğ°Ğ³Ñ€ÑƒĞ¶ĞµĞ½Ğ½Ğ¾ÑÑ‚ÑŒ Ğ·Ğ¾Ğ½ Ğ¿Ğ¾ Ğ´Ğ°Ñ‚Ğ°Ğ¼
SELECT 
  z.name as zone_name,
  b.booking_date,
  COUNT(*) as bookings_count,
  z.seats_count,
  ROUND(COUNT(*) * 100.0 / z.seats_count, 2) as occupancy_percent
FROM zones z
LEFT JOIN seats s ON z.id = s.zone_id
LEFT JOIN bookings b ON s.id = b.seat_id
WHERE b.status = 'active'
  AND b.booking_date BETWEEN '2024-01-01' AND '2024-01-31'
GROUP BY z.id, z.name, z.seats_count, b.booking_date
ORDER BY b.booking_date, occupancy_percent DESC;
```
